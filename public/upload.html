<html>
<head>
<title>File Metadata Microservice</title>
</head>
<body>
<div class="container">
            <h1 class="header">
                API Basejump: File Metadata Microservice
            </h1>
            <blockquote>
                User stories:
                <ul>1) I can submit a FormData object that includes a file upload.</ul>
                <ul>2) When I submit something, I will receive the file size in bytes within the JSON response.</ul>
                <ul>3) Hint: You may want to use this package: https://www.npmjs.com/package/multer</ul>
                <ul><i>API address:  http://rebot-fcc-fifth.herokuapp.com/api/up/</i></ul>
            </blockquote>
        </div>
    <br><br>
    <form enctype="multipart/form-data" method="post" name="fileup">
        <input type="file" name="thefile" required />
        <input type="button" value="Upload" id="uploadbutton">
        <input type="reset" value="Reset">
    </form>


    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
        // when page is ready
        $( document ).ready(function() {
            // when clicking "uploadbutton"
            $('#uploadbutton').click(function(){
                // stop bad stuff
                event.stopPropagation();
                event.preventDefault();
                // grab html form from above
                var data = new FormData(jQuery('form')[0]);
                // send ajax post request and return with success/error alert message
                $.ajax({
                    url: '/api/up',
                    type: 'POST',
                    data: data,
                    cache: false,
                    processData: false,
                    contentType: false,
                    error: function(jqXHR, textStatus, errorThrown) {
                        alert(textStatus + ": you did not enter a file");
                    },
                    success: function(data) {
                        alert("FILE SIZE: " + data + " bytes");
                    }
                });
            })
        });
    </script>


</body>
</html>